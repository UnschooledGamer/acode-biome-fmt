/*! For license information please see main.js.LICENSE.txt */
!function(){"use strict";var t={m:{},u:function(t){return t+".js"}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var e;t.g.importScripts&&(e=t.g.location+"");var r=t.g.document;if(!e&&r&&(r.currentScript&&"SCRIPT"===r.currentScript.tagName.toUpperCase()&&(e=r.currentScript.src),!e)){var n=r.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e}(),t.b=document.baseURI||self.location.href;var e=JSON.parse('{"id":"acode.fmt.biome","UU":"Acode Biome Fmt"}');function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(){var t,e,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function c(r,n,i,a){var c=n&&n.prototype instanceof s?n:s,f=Object.create(c.prototype);return o(f,"_invoke",function(r,n,o){var i,a,c,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:b,f:b.bind(t,4),d:function(e,r){return i=e,a=0,c=t,p.n=r,u}};function b(r,n){for(a=r,c=n,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],b=p.p,d=i[2];r>3?(o=d===n)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=b&&((o=r<2&&b<i[1])?(a=0,p.v=n,p.n=i[1]):b<d&&(o=r<3||i[0]>n||n>d)&&(i[4]=r,i[5]=n,p.n=d,a=0))}if(o||r>1)return u;throw l=!0,n}return function(o,f,d){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&b(f,d),a=f,c=d;(e=a<2?t:c)||!l;){i||(a?a<3?(a>1&&(p.n=-1),b(a,c)):p.n=c:p.v=c);try{if(s=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(l=p.n<0)?c:r.call(n,p))!==u)break}catch(e){i=t,a=1,c=e}finally{s=1}}return{value:e,done:l}}}(r,i,a),!0),f}var u={};function s(){}function f(){}function l(){}e=Object.getPrototypeOf;var p=[][i]?e(e([][i]())):(o(e={},i,function(){return this}),e),b=l.prototype=s.prototype=Object.create(p);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,o(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t}return f.prototype=l,o(b,"constructor",l),o(l,"constructor",f),f.displayName="GeneratorFunction",o(l,a,"GeneratorFunction"),o(b),o(b,a,"Generator"),o(b,i,function(){return this}),o(b,"toString",function(){return"[object Generator]"}),(n=function(){return{w:c,m:d}})()}function o(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}o=function(t,e,r,n){if(e)i?i(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r;else{var a=function(e,r){o(t,e,function(t){return this._invoke(e,r,t)})};a("next",0),a("throw",1),a("return",2)}},o(t,e,r,n)}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)})}}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,s(n.key),n)}}function u(t,e,r){return(e=s(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t){var e=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:e+""}function f(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var l=["js","ts","jsx","tsx","json","css","graphql"],p=new WeakSet,b=function(){return r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}(this,p),u(this,"baseUrl",void 0),u(this,"biomeWorker",null)},o=[{key:"init",value:(s=a(n().m(function r(o,i,a){var c=this;return n().w(function(r){for(;;)switch(r.n){case 0:console.log("init"),acode.registerFormatter(e.id,[].concat(l),this.format.bind(this)),this.biomeWorker=new Worker(new URL(t.p+t.u(76),t.b),{type:void 0}),this.biomeWorker.addEventListener("message",function(t){if(console.log("%cbiome Worker :: %cin-msg","color: #4CAF50; font-weight: bold;","color: #2196F3; font-weight: bold;",t.data),"init"!==t.data.type){if("updated"===t.data.type){if("Can't format with errors"==t.data.biomeOutput.code||"Not Supported"==t.data.biomeOutput.code)return;if(t.data.biomeOutput.error)return console.error("biome Worker :: [âŒ] Error",t.data.biomeOutput.error),window.toast("Can't format with errors (check Console for Errors)",3e3);var e=editorManager.getFile(t.data.path,"uri");if(!e)return;f(p,c,m).call(c,e,t.data.biomeOutput.code)}}else console.info("biome Worker :: [ðŸ”¥] Initialized")}),this.biomeWorker.addEventListener("messageerror",function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=console).log.apply(t,["biome Worker :: in-msg-error"].concat(r))}),this.biomeWorker.addEventListener("error",function(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(t=console).log.apply(t,["biome Worker :: Worker Error"].concat(r))}),this.biomeWorker.postMessage({type:"init"});case 1:return r.a(2)}},r,this)})),function(t,e,r){return s.apply(this,arguments)})},{key:"format",value:(i=a(n().m(function t(){var e,r,o,i;return n().w(function(t){for(;;)switch(t.n){case 0:return r=editorManager.editor.session.getValue(),o=editorManager.activeFile,t.n=1,f(p,this,d).call(this,o.uri);case 1:i=t.v,null===(e=this.biomeWorker)||void 0===e||e.postMessage({type:"formatContent",path:o.uri,content:r,config:i});case 2:return t.a(2)}},t,this)})),function(){return i.apply(this,arguments)})},{key:"destroy",value:function(){console.log(e.UU,"cleaning..."),this.biomeWorker&&(this.biomeWorker.terminate(),this.biomeWorker=null),console.log(e.UU,"destroyed (cleanup complete)!")}}],o&&c(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i,s}();function d(t){return h.apply(this,arguments)}function h(){return(h=a(n().m(function t(e){var r,o,i,a,c,u;return n().w(function(t){for(;;)switch(t.n){case 0:if(e){t.n=1;break}return t.a(2,null);case 1:(r=e).startsWith("file://")&&(r=new URL(r).pathname),o=r.substring(0,r.lastIndexOf("/"));case 2:if(!o||"/"===o){t.n=10;break}return i="".concat(o,"/biome.json"),t.p=3,a=acode.fsOperation(i),t.n=4,a.stat();case 4:if(!t.v.isFile){t.n=6;break}return t.n=5,a.readFile("utf-8");case 5:return c=t.v,t.a(2,c);case 6:t.n=8;break;case 7:t.p=7,t.v;case 8:if((u=o.substring(0,o.lastIndexOf("/")))!==o){t.n=9;break}return t.a(3,10);case 9:o=u,t.n=2;break;case 10:return t.a(2,null)}},t,null,[[3,7]])}))).apply(this,arguments)}function m(t,e){var r=t.session,n=Object.assign({},r.getUndoManager()),o=n.$undoStack,i=n.$redoStack,a=n.$rev,c=n.$mark;r.setValue(e);var u=r.getUndoManager();u.$undoStack=o,u.$redoStack=i,u.$rev=a,u.$mark=c}if(window.acode){var y=new b;acode.setPluginInit(e.id,function(){var t=a(n().m(function t(e,r,o){var i,a;return n().w(function(t){for(;;)switch(t.n){case 0:return i=o.cacheFileUrl,a=o.cacheFile,e.endsWith("/")||(e+="/"),y.baseUrl=e,t.n=1,y.init(r,a,i);case 1:return t.a(2)}},t)}));return function(e,r,n){return t.apply(this,arguments)}}()),acode.setPluginUnmount(e.id,function(){y.destroy()})}}();